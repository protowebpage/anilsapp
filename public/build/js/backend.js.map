{"version":3,"sources":["backend.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"backend.js","sourcesContent":["$(function(){\n\n\t$('body')\n\t\t.on('click', '.delete-list-item', function(e){\n\t\t\te.preventDefault();\n\t\t\tvar self = $(this);\n\t\t\tbootbox.confirm(\"Delete this entry?\", function(result){\n\t\t\t\tif(result) {\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: '/' + self.attr('data-route') + '/' + self.attr('data-id'),\n\t\t\t\t\t\ttype: 'delete',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t_method: 'delete'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function(){\n\t\t\t\t\t\t\tself.parents('tr').fadeOut(1000, function(){\n\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t})\n\t\t.on('click', '.editable', function(e){\n\t\t\te.preventDefault();\n\t\t\tnew inlineEditableField($(this));\n\t\t})\n\n\n});\n\n\nfunction inlineEditableField(toggler){\n\tvar self = this;\n\n\tthis.toggler = toggler;\n\tthis.model = toggler.parents('table').attr('data-route'), \n\tthis.field = toggler.attr('data-field'), \n\tthis.item_id = toggler.parents('tr').attr('data-id'),\n\tthis.oldValue = toggler.text(),\n\tthis.input = $('<input type=\"text\" class=\"form-control\" value=\"'+this.oldValue+'\">')\n\tthis.postData = {\n\t\t_method: 'PATCH'\n\t};\n\tself.escapeKey = false;\n\n\tself.showInput();\n\tself.onInputKeyup();\n\tself.onInputBlur();\t\n}\n\n\tinlineEditableField.prototype.onInputKeyup = function(){\n\t\tvar self = this;\n\n\t\tthis.input.on('keyup', function(e){\n\n\t\t\t// Enter Pressed\n\t\t\tif(e.keyCode == 13){\n\n\t\t\t\tif(self.sameValue()){\n\t\t\t\t\t\n\t\t\t\t\tself.hideInput();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar result = self.patch();\n\t\t\t\t\tif(result.success === true){\n\t\t\t\t\t\tself.hideInput();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.input.val(self.oldValue);\n\t\t\t\t\t\tbootbox.alert(result.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} \n\t\t\t// Escape Key Pressed\n\t\t\tif (e.keyCode == 27) {\n\t\t\t\tif(self.sameValue()){\n\t\t\t\t\tself.hideInput();\n\t\t\t\t} else {\n\t\t\t\t\tself.escapeKey = true;\n\t\t\t\t\tself.saveOrCancel();\n\t\t\t\t}\n\t\t\t}\t\t\n\n\t\t});\n\t}\n\n\tinlineEditableField.prototype.onInputBlur = function(){\n\t\tvar self = this;\n\n\t\tthis.input.on('blur', function(){\n\t\t\tif(self.sameValue()){\n\t\t\t\tself.hideInput();\n\t\t\t} else {\n\t\t\t\tif(self.escapeKey === true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tself.saveOrCancel();\n\t\t\t}\n\t\t});\n\t}\n\n\tinlineEditableField.prototype.sameValue = function(){\n\n\t\tif(this.input.val().trim() == this.oldValue){\n\t\t\tthis.input.val(this.input.val().trim());\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tinlineEditableField.prototype.saveOrCancel = function(){\n\t\tvar self = this;\n\n\t\tif(this.input.val().trim() == ''){\n\n\t\t\tthis.input.val(this.oldValue);\n\t\t\tthis.hideInput();\n\n\t\t} else if((this.input.val() != this.oldValue)){\n\n\t\t\tbootbox.confirm('Save updated input?', function(result) {\n\n\t  \t\tif(result === false){\n\t\t\t\t\tself.input.val(self.oldValue);\n\t\t\t\t\tself.hideInput();\n\t  \t\t}else{\n\t  \t\t\tself.patch();\n\t\t\t\t\tself.hideInput();\n\t  \t\t}\n\t\t\t}); \n\t\t}\n\t}\n\n\tinlineEditableField.prototype.hideInput = function(){\n\t\tif(this.input.val() != this.oldValue) {\n\t\t\tthis.toggler.text(this.input.val());\n\t\t}\n\t\tthis.toggler.show();\n\t\tthis.input.off('keyup').remove();\n\t}\n\n\tinlineEditableField.prototype.showInput = function(){\n\t\tthis.toggler.hide().after(this.input);\n\t\tthis.input.focus();\n\t}\n\n\tinlineEditableField.prototype.patch = function(){\n\n\t\tvar self = this,\n\t\t\t\tresult = {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\tmessage: ''\n\t\t\t\t};\n\n\t\tthis.postData[this.field] = this.input.val();\n\n\t\t$.ajax({\n\t\t\tasync: false,\n\t\t\turl: '/'+this.model+'/'+ this.item_id,\n\t\t\ttype: 'PATCH',\n\t\t\tdata: this.postData, \n\t\t\tbeforeSend: function(){},\n\t\t\terror: function(response){\n\t\t\t\tif(response.status == 422){\n\t\t\t\t\tfor(var field in response.responseJSON){\n\t\t\t\t\t\tresult.message += response.responseJSON[field] + \"\\n\";\n\t\t\t\t\t}\n\t\t\t\t} else if(response.status == 401) { \n\t\t\t\t\tbootbox.alert('Not Authorized');\n\t\t\t\t}\n\t\t\t},\n\t\t\tsuccess: function(response){\n\t\t\t\tresult.success = true;\n\t\t\t}\n\t\t});\t\t\n\n\t\treturn result;\n\t}\n\n$.ajaxSetup(\n{\n  headers:\n  {\n    'X-CSRF-Token': Laravel.csrfToken\n  }\n});\n\nfunction log(data){\n\tconsole.log(data);\n}"]}